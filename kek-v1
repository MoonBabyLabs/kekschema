{
	"$schema": "http://json-schema.org/draft-06/schema#",
	"$id": "http://kekdocs.com/schemas/kek-v1",
	"title": "Kek Format Schema",
	"type": "object",
	"required": ["id", "revisions"],
	"properties": {
		"id": {
			"type": "string",
			"description": "A 12 byte (20 char) global unique identifier consisting of 4 bytes representing seconds since Unix epoch, 3 byte machine identifier, 2 byte process id, and 3 byte counter starting with a random value. Go Reference sample: https://github.com/rs/xid"
		},
		"current_state": {
			"type": "object",
			"title": "Kek Current Content",
			"description": "Non-required field to be used as helper to display the most current doc property data without having to use a build function. Generally better to store this information in an outside database."
		},
		"title": {
			"type": "string"
		},
		"description": {
			"type": "string"
		},
		"revisions": {
			"type": "array",
			"items": {
				"title": "Kekrevision Block",
				"description": "A single revision block in the kek document chain.",
				"type": "object",
				"required": ["user", "hash", "index", "data"],
				"user": {
					"user": {
						"type": "object",
						"description": "A unique identifier to whom modified this data.",
						"required" :  ["record", "source"],
						"properties" : {
							"id" : {
								"type" : "string"
							},
							"source" : {
								"type" : "string",
								"description" : "The source of how this modifier record was obtained. "
							}
						}
					},
					"signature": {
						"type": "object",
						"title": "Signed verification",
						"description": "A 3rd party verification signature that can assure the authenticity of this revision.",
						"additionalProperties": false,
						"properties": {
							"source": {
								"type": "string",
								"format": "uri",
								"pattern": "^(https?|wss?|ftp)://",
								"description": "The uri to the 3rd party source that has written the signature."
							},
							"token": {
								"type": "string",
								"description": "The unique token string that verifies this block."
							}
						}
					},
					"comment" : {
						"type" : "string",
						"description" : "A note to describe what changed and why it was changed.",
						"maxLength" : 256
					},
					"hash": {
						"type": "string",
						"description": "A  256 sha hash that consists of the index + previous_hash + data + autoincrementing nonce value. MUST start with 2 leading zeroes",
						"minLength" : 256,
						"maxLength" : 256,
					},
					"index": {
						"type": "number",
						"description": "The current index of the block in the chain"
					},
					"timestamp": {
						"type": "number",
						"description": "The unix timestamp when the revision block was added."
					},
					"data": {
						"title": "Modified KekDoc properties",
						"type": "object",
						"description" : "Data should be an object that includes only modified data. Removed data should equal null.",
						"additionalProperties" : {
							"type" : "object",
							"description" : "the old and new state of the modified content",
							"properties" : {
								"old" : {
									"type" : "object",
									"description" : "The old state object of items that have changed",
									"title" : "Old State"
								},
								"new" : {
									"type" : "object",
									"description" : "the new state of modified data on the piece of content.",
									"title" : "New State"
								}
							}
						}
					}
				}
			}
		}
	}
}